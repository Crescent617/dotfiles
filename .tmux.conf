# --------------------------------------------------- Tmux Config -----------------------------------------------------------
# set-option -g default-shell /bin/bash
set-option -g mouse on

set -g history-limit 20000
set -g base-index 1      # 设置窗口的起始下标为1
set -g pane-base-index 1 # 设置面板的起始下标为1
set -s focus-events on

set-option -g set-titles on
set-option -g set-titles-string "[#{session_name}] - #{host}"
set-window-option -g automatic-rename on
set-window-option -g monitor-activity on

# # --------------------------------------------------- unbind -----------------------------------------------------------
unbind C-b # C-b 即 Ctrl+b 键，unbind 意味着解除绑定

# # --------------------------------------------------- prefix -----------------------------------------------------------
# # 修改指令前缀
set -g prefix C-a
bind C-a send-prefix # 绑定 Ctrl+a 为新的指令前缀

# 从tmux v1.6版起，支持设置第二个指令前缀
# set-option -g prefix2 ` # 设置一个不常用的`键作为指令前缀，按键更快些

# Kill pane/window/session shortcuts
bind X confirm-before -p "kill-window #W? (y/n)" kill-window
bind Q confirm-before -p "kill-session #S? (y/n)" kill-session
bind C-x confirm-before -p "kill other windows? (y/n)" "kill-window -a"

# # --------------------------------------------------- 面板 -----------------------------------------------------------
unbind '"'
bind - splitw -v -c '#{pane_current_path}' # 垂直方向新增面板，默认进入当前目录
unbind %
bind = splitw -h -c '#{pane_current_path}' # 水平方向新增面板，默认进入当前目录
bind-key j command-prompt -p "send pane to:" "join-pane -t '%%'"

# pane border
# set-option -g pane-border-style fg=colour235 #fg=base02
# set-option -g pane-active-border-style fg=colour240 #fg=base01

# Shift arrow to switch windows
bind -n S-Left previous-window
bind -n S-Right next-window

# Edit configuration and reload
bind C-e new-window -n 'tmux.conf' "sh -c '\${EDITOR:-vim} ~/.tmux.conf && tmux source ~/.tmux.conf && tmux display \"Config reloaded\"'"

# new window and retain cwd
# bind-key C command-prompt -p "Name of new window: " "new-window -n '%%'"

# Prompt to rename window right after it's created
# set-hook -g after-new-window 'command-prompt -I "#{window_name}" "rename-window '%%'"'

#-------------------------------------------------------#
#Pane colours
#-------------------------------------------------------#
# set inactive/active window styles
# set -g window-style bg=colour
# set -g window-active-style bg=black
 
#pane border
# set -g pane-border-bg colour235
# set -g pane-border-fg colour238
# set -g pane-active-border-bg colour236
# set -g pane-active-border-fg colour51
#-------------------------------------------------------#

# # --------------------------------------------------- vim 风格 -----------------------------------------------------------

set -g status-keys vi
set-window-option -g mode-keys vi
set-window-option -g mode-style "fg=default,bg=#43437C"

# Use Alt-vim keys without prefix key to switch panes
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# --------------------------------------------------- 状态栏 -----------------------------------------------------------
#+--------+
#+ Status +
#+--------+
set-option -g status-justify left
set-option -g status-style bg=black
set-option -g status-position top
set-option -g status-right-length 60

#+--- Bars ---+
set -g status-left "#[fg=blue,bg=black]#[fg=black,bg=blue,bold] #S #[fg=blue,bg=black] "
set-option -g status-right '#{=50:pane_title} | %H:%M %d-%b-%y'

#+--- Windows ---+
set -g window-status-format "#[fg=brightblack,bg=black]#[fg=white,bg=brightblack] #I #[fg=white,bg=brightblack]| #[fg=white,bg=brightblack]#W #F #[fg=brightblack,bg=black]"
set -g window-status-current-format "#[bg=black,fg=cyan]#[fg=black,bg=cyan] #I #[fg=black,bg=cyan]| #[fg=black,bg=cyan]#W #F #[fg=cyan,bg=black]"
set -g window-status-separator " "

# # --------------------------------------------------- plugins ----------------------------------------------------
# 将下面内容复制到`~/.tmux.conf`
# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'

# Other examples:
# set -g @plugin 'tmux-plugins/tmux-sidebar'
# set -g @plugin 'sainnhe/tmux-fzf'

## menu
set -g @plugin 'jaclu/tmux-menus'
set -g @menus_trigger 'C-\'
set -g @menus_without_prefix 1

# set -g @plugin 'tmux-plugins/tmux-copycat'
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'git@github.com/user/plugin'
# set -g @plugin 'git@bitbucket.com/user/plugin'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
